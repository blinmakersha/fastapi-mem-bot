# –ü—Ä–æ–µ–∫—Ç:

**–ë–æ—Ç –¥–ª—è –º–µ–º–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Fast Api**

## –°—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞:
–≠—Ç–æ –±—ç–∫–µ–Ω–¥ –¥–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞ —Å –º–µ–º–∞–º–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ–Ω –Ω–∞ Fast Api, —Å–æ–¥–µ—Ä–∂–∏—Ç API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏.


## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–º–∞
  - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –∏ —Ç–µ–∫—Å—Ç–∞
  - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –æ–±—â—É—é –∫–æ—Ä–∑–∏–Ω—É –º–µ–º–æ–≤ –∏ –≤ –ª–∏—á–Ω—É—é

- –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –º–µ–º–∞
  - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –º–µ–º–∞
  - –æ—Ü–µ–Ω–∫–∞ –º–µ–º–∞: –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫

- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–º–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –º–µ–º–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ –º–µ–º–∞

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ú–µ–º—ã
  ```
  POST /upload
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –º–µ–º–∞
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `body`: —Ç–µ–∫—Å—Ç –¥–ª—è –º–µ–º–∞
    - `file`: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –º–µ–º–∞
  - –û—Ç–≤–µ—Ç: `MemAfterCreate` - –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –º–µ–º–∞

  ```
  GET /
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ –º–µ–º–æ–≤ –∏–∑ –æ–±—â–µ–π –∏–ª–∏ –ª–∏—á–Ω–æ–π –∫–æ—Ä–∑–∏–Ω—ã
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `cart_type`: —Ç–∏–ø –∫–æ—Ä–∑–∏–Ω—ã (–æ–±—â–∞—è/–ª–∏—á–Ω–∞—è)
  - –û—Ç–≤–µ—Ç: `List[MemRead]`

  ```
  GET /random
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: —Å–ª—É—á–∞–π–Ω—ã–π –º–µ–º
  - –û—Ç–≤–µ—Ç: `MemRead`

  ```
  GET /trend-mem
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –º–µ–º
  - –û—Ç–≤–µ—Ç: `MemRead`

  ```
  GET /{mem_id}
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ –º–µ–º–∞ –ø–æ ID
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `mem_id`: ID –º–µ–º–∞
  - –û—Ç–≤–µ—Ç: `MemRead`

  ```
  GET /download/{mem_id}
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–µ–º –ø–æ ID
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `mem_id`: ID –º–µ–º–∞
  - –û—Ç–≤–µ—Ç: —Ñ–∞–π–ª –º–µ–º–∞

  ```
  GET /mark/{mem_id}
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –æ—Ü–µ–Ω–∫–∞ –º–µ–º–∞ (–ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫)
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `mem_id`: ID –º–µ–º–∞
    - `mark`: –ª–∞–π–∫ –∏–ª–∏ –¥–∏–∑–ª–∞–π–∫
  - –û—Ç–≤–µ—Ç: `MemRead` - –¥–∞–Ω–Ω—ã–µ –º–µ–º–∞

  ```
  GET /add-to-cart/{mem_id}
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ–º –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `mem_id`: ID –º–µ–º–∞
  - –û—Ç–≤–µ—Ç: `ORJSONResponse` - —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

  ```
  POST /login
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ—Ç, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `body`: –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –û—Ç–≤–µ—Ç: `UserLoginResponse` - —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞

  ```
  POST /info
  ```
  - –û–ø–∏—Å–∞–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - `access_token`: —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
  - –û—Ç–≤–µ—Ç: `JwtTokenT`

## üîß –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å –Ω–∏–º

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```bash
cd conf
—Å—Ä .env.example .env
```

```env
BIND_PORT=–ø–æ—Ä—Ç –±—ç–∫–µ–Ω–¥ —á–∞—Å—Ç–∏
BIND_IP=ip –∞–¥—Ä–µ—Å –±—ç–∫–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
DB_URL=postgresql+asyncpg://postgres:postgres@web_db:5432/main_db
JWT_SECRET_SALT=—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á jwt
KAFKA_BOOTSTRAP_SERVERS=["kafka:29092"]
KAFKA_TOPIC=test_resize_image
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minio123
MINIO_HOST=minio
MINIO_PORT=9000
```
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ grafana:

```bash
cd ../
cd grafana
—Å—Ä .env.example .env
```

```env
GF_DATABASE_TYPE=postgres
GF_DATABASE_NAME=main_db
GF_DATABASE_USER=postgres
GF_DATABASE_PASSWORD=postgres
GF_DATABASE_HOST=web_db:5432
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
```
4. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker-compose up
```

---

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

- –£–ø–∞–∫–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –¥–æ–∫–µ—Ä-–∫–æ–º–ø–æ—É–∑ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker compose up –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –î–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞ - —á–µ—Ä–µ–∑ polling –∏ —á–µ—Ä–µ–∑ webhook
- –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ flake8 + mypy –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –°—Ç–µ–π—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–¥ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ë–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–¥
- –ú–µ—Ç—Ä–∏–∫–∏: 
  - TODO
  - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ (–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –±–µ–∫–µ–Ω–¥ –∏ —Ç–µ–ª–µ–≥—Ä–∞–º)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ env
  - –ë–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- poetry –∫–∞–∫ —Å–±–æ—Ä—â–∏–∫ –ø–∞–∫–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç –±–æ—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª—É–¥–∞
- –í README.md –æ–∂–∏–¥–∞–µ—Ç—Å—è —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –ø—Ä–æ—â–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- –°–∫–≤–æ–∑–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---